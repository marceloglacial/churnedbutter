"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Postmedia.Audience.EventType=Postmedia.Audience.EventType||{},Postmedia.Audience.EventType.UserContent=5,"object"==_typeof(Postmedia.Analytics.NLP)&&(Postmedia.Analytics.NLP.EntityParser=function(e){var t=[];if("object"==_typeof(e))for(var o=e.length,n=0;n<o;n++)for(var a=e[n].children,i=a.length,s=0;s<i;s++)for(var l=a[s].children,r=l.length,c=0;c<r;c++)t.push(e[n].value+">"+a[s].value+">"+l[c].value+","+l[c].score+","+l[c].rank);else if("string"==typeof e){e.split("| ").forEach(function(e){t.push({value:e,type:"Entity",score:"",rank:"",level1:"",level2:"",globalPostId:Postmedia.Analytics.ContentId+", "+Postmedia.Analytics.ContentOriginId})})}return t},Postmedia.Analytics.NLP.CategoryParser=function(e){var o=[];if("object"==_typeof(e))for(var t=e.length,n=0;n<t;n++)o.push(e[n].value+","+e[n].score);else if("string"==typeof e){var a=e.split(", "),i={};a.forEach(function(e,t){t%2==0?(i.score=e,i.type="Category",i.globalPostId=Postmedia.Analytics.ContentId+", "+Postmedia.Analytics.ContentOriginId,o.push(i),i={}):i.value=e})}return o},Postmedia.Analytics.NLP.TopicsParser=function(e){var t=[];if("object"==_typeof(e))for(var o=e.length,n=0;n<o;n++)t.push(e[n].value+","+e[n].score);else if("string"==typeof e){e.split("| ").forEach(function(e){t.push({value:e,type:"Topics",score:"",globalPostId:Postmedia.Analytics.ContentId+", "+Postmedia.Analytics.ContentOriginId})})}return t}),Postmedia.Audience.logNLPTags=function(){try{if("object"!=_typeof(arguments[0]))throw"NLP data must be an object.";var e=Postmedia.Analytics.NLP.EntityParser(Postmedia.Analytics.NLP.entities||Postmedia.Analytics.NLP.EntityTags),t=Postmedia.Analytics.NLP.CategoryParser(Postmedia.Analytics.NLP.categories||Postmedia.Analytics.NLP.CategoryTags),o=Postmedia.Analytics.NLP.TopicsParser(Postmedia.Analytics.NLP.key_topics||Postmedia.Analytics.NLP.KeyTopics);if(e)if(Postmedia.Analytics.NLP.entities)for(var n=e.length,a=0;a<n;a++)for(var i=e[a].children,s=i.length,l=0;l<s;l++)for(var r=i[l].children,c=r.length,P=0;P<c;P++)Postmedia.Audience.logEvent("NLP Tag",Postmedia.Audience.EventType.UserContent,{Value:r[P].value,Type:"Entity",Score:r[P].score,Relatedness:r[P].rank,"Level 1":e[a].value,"Level 2":i[l].value,"Global Post ID":Postmedia.Analytics.ContentId+", "+Postmedia.Analytics.ContentOriginId},{"Google.NonInteraction":!0});else for(a=0;a<e.length;a++)Postmedia.Audience.logEvent("NLP Tag",Postmedia.Audience.EventType.UserContent||5,{Value:e[a].value,Type:e[a].type,Score:e[a].score,Relatedness:e[a].rank,"Level 1":e[a].level1,"Level 2":e[a].level2,"Global Post ID":e[a].globalPostId},{"Google.NonInteraction":!0});if(t){var d=t.length;for(a=0;a<d;a++)Postmedia.Audience.logEvent("NLP Tag",Postmedia.Audience.EventType.UserContent,{Value:t[a].value,Type:t[a].type,Score:t[a].score,"Global Post ID":t[a].globalPostId},{"Google.NonInteraction":!0})}if(o){var y=o.length;for(a=0;a<y;a++)Postmedia.Audience.logEvent("NLP Tag",Postmedia.Audience.EventType.UserContent,{Value:o[a].value,Type:o[a].type,Score:o[a].score,"Global Post ID":o[a].globalPostId},{"Google.NonInteraction":!0})}return!0}catch(e){return console.error("Postmedia.Audience.logEvent -",e),!1}},Postmedia.Analytics.NLP&&Postmedia.Audience&&Postmedia.Audience.EventType&&Postmedia.Audience.logNLPTags(Postmedia.Analytics.NLP);